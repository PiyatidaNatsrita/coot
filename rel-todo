
   For Release 0.8.9

   o Delete residue, delete residue works? ::: 0.5

--------------

   o chemical diagram for Acedrg dictionary for this molecule:
     COC(=O)C(=COC)c1ccccc1COC(N1C)=CC(=N1)C(=C2O)C=C(Cl)C=C2"
     Disable the conversion to NH+ if any bond to the nitrogen is aromatic.  ::: 1

* Done. Actually, disabled when 3 non-H bonds to N.

   o Fix make check on test chemical features ::: 1

* Done.

    libc++abi.dylib: terminating with uncaught exception of type std::runtime_error: WARNING:: 
    Requested flexible molecule for ligand "RRQ" ::: 1

* Done. 

   o pyrogen -n -M -C ATP AMP.smi.  The atom names are ultra-quoted. ::: 1

* Fixed.

   o Renumber residue should have  ::: 4

    [    ] or o N-terminus 
           to 
    [    ] or o C-terminus 

* Done

   o in Ana's map after sequence assignment (which was very fast): it went into a long 
     stall - not sure what it was doing. Without fitting, the model had hideous mainchain

* Done. "Fitting" means real space refinement - hideous mainchain came from non-backrub rotamer search
  (now backrub rotamer search is enabled).  ::: 1

   o speed up accept after rigid body fit. ::: 1

* Done.

   o  can you read this: all-comp-ids/T/PDBe-TFH.cif.  Its OBS though.

* Too obscure

   o colour by occupancy and colour by B-factor don't work [Hans Raaijmakers] ::: 1

* Done.

   o Residue info should not show TER atoms ::: 1

* It doesn't.

   o version-full should say if we are compiled with modern-language and enhanced-ligand tools ::: 1

* It does now.

   o "Delete All Carbohydrate" on 5fuu is very slow. Fix. Needs  ::: 1
      delete_residues(imol, res_specs).

* Done.

   o copy a fragment that has a link.  The link is not copied into fragment molecule. ::: 1

* Done.

   o API access to write a cif file (if input file is cif... or pdb) ::: 1

* Done.

   o (cryo-EM) map molecules should save their sigma step to the state file ::: 1

* They do.

   o map_peaks*.py should make negative peaks [Oliver Smart] ::: 1

* Done.

   o delete_sidechain_range() needs to turn off backups - or consolidate the function
     into C++. ::: 0.5

* Done

   o unhide (unsubmarine) Edit Restraints window ::: 1

* Done.

   o what about this interaction in refinement: N(n) - HA2(n+1) GLY (an H on the CA)?
     simple-restraint.cc: make_non_bonded_contact_restraints().  Is the HA2-CA-C angle
     in reduced_angle_info_container_t? 1iei, residue 19 A.
     Also 1-4 NBC: A 22 C (SER) -- A 23 ND3 (PRO)

    (define (linear-refine-residues imol chain-id r1 r2)
        (refine-residues imol (map (lambda(r) (list chain-id r "")) (range r1 (+ r2 1)))))

     ::: 6

* Done.

   o draw sequence view: which molecule number are we looking at? ::: 1

* Done

   o all atom contact dots labels should have a molecule number attached. ::: 1

* Done.

   o on mutating a THR (or anything) to a PRO, remember to delete H. ::: 0.5

* Done.

   o Make it easy for me to re-run the previous refinement ::: 1
   o repeat previous refinement: wrap refine-zone using (stored) atom indices
     residue_range_atom_index_1 and residue_range_atom_index_2

* Done.

   o Copy fragment dialog should not dismiss if a new molecule is not created because it
     failed find atoms. ::: 1

* Done.

   o run lidia -> hydrogenate, then coot reduce - don't double protonate atoms  ::: 0.5

* Done.

   o get rid of this: 
     INFO:: setup minimol from mol: no spacegroup
     ::: 0.5

* Done.

   o get rid of this:
.... step_count: 880 step_count_lim 5000
     ::: 0.5

* Done, was fixed in refinement


   o click-click refinement with fixed atoms gives NOPROGRESS. Must fix. ::: 6

* Done.

   o does pyrogen -p work? (after cairo fiddling) ::: 0.5

* Done. from PIL import Image

   o save map dialog needs to be a transient  ::: 0.5

* Done

   o Add hydrogen atoms on an MSE in reduce ::: 0.5

* Done

   o undo and redo should update the Ramachandran plot ::: 1

* Done

   o fix the chiral atom distortion in Ligand -> Display Ligand Distortions
     e.g. A 304 SAH in 5p9v. ::: 0.5

* Done

   o on quick-save-as, if there are 2 molecules called "Helix" (or whatever) they should be
     saved to different file names. ::: 1

* Semi-fixed by changing the generated molecule names.

   o look at A-with-ligand.pdb and try to rotamer fit 41A. It doesn't go in. Now delete hydrogens
     from the ligand - now it fits. So hydrogen bumping in (old) rotamer fitting is wrong. ::: 0.5

* Done.

   o add in get-restraints-from-models.scm and files. ::: 0.5

* Done.


   o ZO: refine a helix, delete it's molecule - the intermediate atoms should be removed too. ::: 0.5

* Done

   o update the ramachandran plot on pepflip-complicado ::: 1

* Done.

   o --splash-screen arb-image.png - does that work? ::: 1

* Done.

   o make cfc work again ::: 3

* Done.

   o Fix this crash, Terence. ::: 1

[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib64/libthread_db.so.1".
Core was generated by `/lmb/home/pemsley/autobuild/Linux-scientific-7.3-el-gtk2-python/libexec/coot-bi'.
Program terminated with signal 11, Segmentation fault.
#0  0x000000000059d971 in do_base_mutation (type=0xe6047d "A") at c-interface-build-side-chain.cc:898
#0  0x000000000059d971 in do_base_mutation(char const*) (type=0xe6047d "A") at c-interface-build-side-chain.cc:898
#1  0x00002b72bf52eb37 in _g_closure_invoke_va () at /lib64/libgobject-2.0.so.0
#2  0x00002b72bf548117 in g_signal_emit_valist () at /lib64/libgobject-2.0.so.0
#3  0x00002b72bf548d9f in g_signal_emit () at /lib64/libgobject-2.0.so.0
#4  0x00002b72bd8cb3f5 in gtk_real_button_released () at /lib64/libgtk-x11-2.0.so.0
#5  0x00002b72bf52eb37 in _g_closure_invoke_va () at /lib64/libgobject-2.0.so.0
#6  0x00002b72bf548117 in g_signal_emit_valist () at /lib64/libgobject-2.0.so.0
#7  0x00002b72bf548d9f in g_signal_emit () at /lib64/libgobject-2.0.so.0
#8  0x00002b72bd8ca033 in gtk_button_button_release () at /lib64/libgtk-x11-2.0.so.0

* Done.

   o write a binary-search/binary-chop version of get-residue ::: 1

* Done.


   o add delete_sidechains_for_chain(imol, chain_id) ::: 0.5

* Done.

   o Add bis tris BTB and Hepes EPE ::: 0.5

* Done

   o don't display the aniso atoms for hydrogens if hydrogens are not displayed ::: 0.5

* Done - not tested.

   o build NAG, NAG, BMA.  In coot-reduce, HO4 should not be added at the links.
     And check that coot-probe looks good.  ::: 1

* Done.

   o ACE, PCA and MSE should not be considered as ligands in go-to-ligand ::: 0.5


   o I don't like fat hydrogen (bonds) in Colour by Chain mode. ::: 2

* Done.

   debug:: switch for sequence_view for imol 0 is 0x0
   ::: 1

* Done

   o In refinement, pull the structure arround to create a cis peptide, then fix it.
     Is the dialog message removed? ::: 1

* Done.


   o difference map peaks needs to be antisubmarined. ::: 0.5

* It is now.

   o make benzoic acid in lidia - does it generate correctly in acedrg and
     pyrogen? ::: 2

* Yes.


   o multi-key-press (key-repeat) on fill-partial -> crash ::: 0.5

* cleaned up now that last_restraints is a pointer?

   o when first molecule is not a protein.  Copy NCS residue range. coot-utils.scm 1533 ::: 1

* Done.

   o Copy-molecule loses the NCS ghost info/tranformations (i.e. O doesn't work) ::: 1


* Done.

   o import imidaloze from lidia in coot. c.f. stand-alone

* I don't know what I was trying to get at.


   o pyrogen -Mn -c PDBe-ADP.cif -> minimation problem

bond  3231.21 [spec: model 1 "B" 464 "" " C1 " ""] [spec: model 1 "B" 141 "" " ND2" ""]
nbc   1162.68 [spec: model 1 "B" 464 "" " C1 " ""] [spec: model 1 "B" 141 "" "HD22" ""] target:  2.90  0.02
nbc    804.52 [spec: model 1 "B" 464 "" " C1 " ""] [spec: model 1 "B" 141 "" "HD21" ""] target:  2.90  0.02
nbc    556.46 [spec: model 1 "B" 468 "" " C1 " ""] [spec: model 1 "B" 467 "" " HO3" ""] target:  2.90  0.02
bond   529.05 [spec: model 1 "B" 467 "" " O3 " ""] [spec: model 1 "B" 468 "" " C1 " ""]
angle  292.05 [spec: model 1 "B" 464 "" " C1 " ""] [spec: model 1 "B" 141 "" " ND2" ""] [spec: model 1 "B" 141 "" " CG " ""] target: 121.00  3.00

   ::: 4

* Seems OK now

   o read in a monomer cif, get monomer.  Bond orders good?  ::: 2

* Done? Seems OK


   o Fetch molecule: acyclovir, (edit?) click Apply ::: 2

* Seems OK.

   o using set_refine_ramachandran_restraints_weight(float w) 
     needs to affect the refinement. ::: 1

* It does now.

   o lidia molfile.mol should Do The Right Thing ::: 1

* Done.


   Lukasz Wojtas:

   1) From res file When I try to show ANISO atoms WinCOOT stops working and shuts down. 
      ::: 1

* Can't reproduce

   2) exported coordinates and U's round off like in shelxl

      EXPORTED: C1    1  0.501129985  0.671778977   0.518324018
      SHELXL:   C1    1  0.501130     0.671779      0.518324    11.00000    0.24195

       ::: 1

* Done. Well 7

   o if user has (add-module-carbohydrate) in ~/.coot, then coot should not
     stop saying unbound variable... i.e. either much of gui-add-linked-cho.scm should
     be in add-linked-cho.scm or all of it which is unconditionally
     loaded at runtime (but (of course)) is conditionally evaluated).

     ::: 1

   o when mutating to MSE atoms become HETATMs. ::: 1
   o when you mutate from an MSE the mainchain should revert to ATOMs ::: 1

   o like sphere refine, but only select residues that are linearly related to
     the active residue (Hmm... how to do the GUI for this...?) ::: 2
     -- Chris Oubridge

     maybe autozone 2 will do?

* Tandem Refine Added

   o display ligand distortions, move and regularize, display ligand distortions. 
     Clear generic display objects -> not all graphics objects are removed - they 
     should be. ::: 0.2

* Can't reproduce

   o put c-interface-refine.hh into the documenation generation ::: 1

* Done.

   o qq-plot-map-and-model - is it in the documentation (and redefines)? ::: 0.5

* Done.

   o delete item, change to delete side chain click (closes)
     delete item, delete side chain radio button is active, but delete residue happens on click
     ::: 1

* Done

   o expert mode in N-linked glyco addition

In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/guile/gtk-2.0/gtk.scm:
 147:  0* [apply #<procedure #f ()> ()]
In unknown file:
   ?:  1  [#<procedure #f ()>]
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/gui-add-linked-cho.scm:
    ...
 893:  2  (let* ((tree-type #)) (let* (#) (for-each # children) #t) #f)
 894:  3* (let* ((children #)) (for-each (lambda # #) children) #t)
 895:  4* [for-each #<procedure #f (child)> (# # # # ...)]
In unknown file:
   ?:  5* [#<procedure #f (child)> #<GtkButton 104b400e0>]
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/gui-add-linked-cho.scm:
 896:  6* (if # #)
 897:  7  [glyco-tree-dialog-set-button-active-state # # expert-user-mode]
    ...
 849:  8  [gtk-widget-set-sensitive #<GtkButton 104b400e0> ...
 849:  9*  [string-member? "Add a NAG-ASN NAG" expert-user-mode]
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/coot-utils.scm:
 560: 10   (cond ((null? ls) #f) ((string=? atom (car ls)) #t) ...)
 562: 11*  [string=? "Add a NAG-ASN NAG" ...
 562: 12*   [car expert-user-mode]
/Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/coot-utils.scm:562:20: In procedure car in expression (car ls):
/Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/coot-utils.scm:562:20: Wrong type (expecting pair): expert-user-mode
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/guile/gtk-2.0/gtk.scm:
 147:  0* [apply #<procedure #f ()> ()]
In unknown file:
   ?:  1  [#<procedure #f ()>]
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/gui-add-linked-cho.scm:
    ...
 893:  2  (let* ((tree-type #)) (let* (#) (for-each # children) #t) #f)
 894:  3* (let* ((children #)) (for-each (lambda # #) children) #t)
 895:  4* [for-each #<procedure #f (child)> (# # # # ...)]
In unknown file:
   ?:  5* [#<procedure #f (child)> #<GtkButton 104b400e0>]
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/gui-add-linked-cho.scm:
 896:  6* (if # #)
 897:  7  [glyco-tree-dialog-set-button-active-state # # expert-user-mode]
    ...
 849:  8  [gtk-widget-set-sensitive #<GtkButton 104b400e0> ...
 849:  9*  [string-member? "Add a NAG-ASN NAG" expert-user-mode]
In /Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/coot-utils.scm:
 560: 10   (cond ((null? ls) #f) ((string=? atom (car ls)) #t) ...)
 562: 11*  [string=? "Add a NAG-ASN NAG" ...
 562: 12*   [car expert-user-mode]
/Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/coot-utils.scm:562:20: In procedure car in expression (car ls):
/Users/pemsley/autobuild/build-coot+rdkit-pre-release-gtk2-python/share/coot/scheme/coot-utils.scm:562:20: Wrong type (expecting pair): expert-user-mode

::: 1

* Done.
   o add mouse-scroll consolidation of contour level deltas ::: 1 

* Done.

   o If I set N-acetyl group to zero occ, does the refinement for the rest of the atoms
     behave the same way as if I had deleted those atoms?  It should.  If not, why not?
     ::: 1

* Fixed (maybe in refinement version though)

   o add a button for refinement weight "Estimate": 0.6 -> 60 so 20 -> 60*0.3/20 ::: 1

* Done.

   o fix the empty nomenclature errors dialog ::: 1

   o add  set_atom_attributes(SCM attribute_expression_list) to the documentation - 
     preprocessing issues. ::: 1

* Done.


   o back-out cryo-EM mode refinement changes ::: 1

* Done

   o doing a change chain ids should move over the Link records also.

     Add a test ::: 1

   o on merging molecules, remove the TER card if we are adding to an already existing chain.
     Consider adding helices made of ALA.  Coot should make a new chain for these. Does it?
     ::: 1

   o It appears that merging coordinates (read from cif with
     multi-character label_asym_id and auth_asym_id) in to another set
     of coordinates will assign single-character chain IDs to the source
     coordinates. Might it be better to just add a prefix to those ids?
        - Wolfram Tempel
     ::: 1


* Used a post-fix. Added a test. Hooray.

   o neighbour refine on a disulphide - e.g. in tutorial, B7 ::: 2

* Done.


   o Ryan Hibbs: 2 strands, low res map, user-defined distance restraint and
     refine - fails to preserve the distance   ::: 2

* it's an ineffective Geman McClure restraints. To make it more effective for just one
  bond, reduce sigma (maybe 0.01?) and reduce alpha (0.001). Hmm.
